function jsonp(e){e.cbName=e.cbName||"jsonp",e.data=e.data||{};var t="jsonp_"+Math.random();t=t.replace(".",""),e.data[e.cbName]=t;var n=[];for(var r in e.data)n.push(r+"="+e.data[r]);var i=n.join("&"),s=document.createElement("script");s.src=e.url+(e.url.indexOf("?")===-1?"?":"&")+i;var o=document.getElementsByTagName("head")[0];o.appendChild(s),window[t]=function(n){e.success&&e.success(n),window[t]=null,o.removeChild(s)}};/*!
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2015 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.9.7
 *
 */(function(e,t,n,r){var i=e(t);e.fn.lazyload=function(s){function f(){var t=0;o.each(function(){var n=e(this);if(a.skip_invisible&&!n.is(":visible"))return;if(!e.abovethetop(this,a)&&!e.leftofbegin(this,a))if(!e.belowthefold(this,a)&&!e.rightoffold(this,a))n.trigger("appear"),t=0;else if(++t>a.failure_limit)return!1})}var o=this,u,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return s&&(r!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),r!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),e.extend(a,s)),u=a.container===r||a.container===t?i:e(a.container),0===a.event.indexOf("scroll")&&u.on(a.event,function(){return f()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,(n.attr("src")===r||n.attr("src")===!1)&&n.is("img")&&n.attr("src",a.placeholder),n.one("appear",function(){if(!this.loaded){if(a.appear){var r=o.length;a.appear.call(t,r,a)}e("<img />").one("load",function(){var r=n.attr("data-"+a.data_attribute);n.hide(),n.is("img")?n.attr("src",r):n.css("background-image","url('"+r+"')"),n[a.effect](a.effect_speed),t.loaded=!0;var i=e.grep(o,function(e){return!e.loaded});o=e(i);if(a.load){var s=o.length;a.load.call(t,s,a)}}).attr("src",n.attr("data-"+a.data_attribute))}}),0!==a.event.indexOf("scroll")&&n.on(a.event,function(){t.loaded||n.trigger("appear")})}),i.on("resize",function(){f()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&i.on("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&o.each(function(){e(this).trigger("appear")})}),e(n).ready(function(){f()}),this},e.belowthefold=function(n,s){var o;return s.container===r||s.container===t?o=(t.innerHeight?t.innerHeight:i.height())+i.scrollTop():o=e(s.container).offset().top+e(s.container).height(),o<=e(n).offset().top-s.threshold},e.rightoffold=function(n,s){var o;return s.container===r||s.container===t?o=i.width()+i.scrollLeft():o=e(s.container).offset().left+e(s.container).width(),o<=e(n).offset().left-s.threshold},e.abovethetop=function(n,s){var o;return s.container===r||s.container===t?o=i.scrollTop():o=e(s.container).offset().top,o>=e(n).offset().top+s.threshold+e(n).height()},e.leftofbegin=function(n,s){var o;return s.container===r||s.container===t?o=i.scrollLeft():o=e(s.container).offset().left,o>=e(n).offset().left+s.threshold+e(n).width()},e.inviewport=function(t,n){return!e.rightoffold(t,n)&&!e.leftofbegin(t,n)&&!e.belowthefold(t,n)&&!e.abovethetop(t,n)},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})})(jQuery,window,document);/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function(t,n,e){n[t]=n[t]||e(),"undefined"!=typeof module&&module.exports?module.exports=n[t]:"function"==typeof define&&define.amd&&define(function(){return n[t]})}("Promise","undefined"!=typeof global?global:this,function(){"use strict";function t(t,n){l.add(t,n),h||(h=y(l.drain))}function n(t){var n,e=typeof t;return null==t||"object"!=e&&"function"!=e||(n=t.then),"function"==typeof n?n:!1}function e(){for(var t=0;t<this.chain.length;t++)o(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function o(t,e,o){var r,i;try{e===!1?o.reject(t.msg):(r=e===!0?t.msg:e.call(void 0,t.msg),r===o.promise?o.reject(TypeError("Promise-chain cycle")):(i=n(r))?i.call(r,o.resolve,o.reject):o.resolve(r))}catch(c){o.reject(c)}}function r(o){var c,u=this;if(!u.triggered){u.triggered=!0,u.def&&(u=u.def);try{(c=n(o))?t(function(){var t=new f(u);try{c.call(o,function(){r.apply(t,arguments)},function(){i.apply(t,arguments)})}catch(n){i.call(t,n)}}):(u.msg=o,u.state=1,u.chain.length>0&&t(e,u))}catch(a){i.call(new f(u),a)}}}function i(n){var o=this;o.triggered||(o.triggered=!0,o.def&&(o=o.def),o.msg=n,o.state=2,o.chain.length>0&&t(e,o))}function c(t,n,e,o){for(var r=0;r<n.length;r++)!function(r){t.resolve(n[r]).then(function(t){e(r,t)},o)}(r)}function f(t){this.def=t,this.triggered=!1}function u(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function a(n){if("function"!=typeof n)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var o=new u(this);this.then=function(n,r){var i={success:"function"==typeof n?n:!0,failure:"function"==typeof r?r:!1};return i.promise=new this.constructor(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");i.resolve=t,i.reject=n}),o.chain.push(i),0!==o.state&&t(e,o),i.promise},this["catch"]=function(t){return this.then(void 0,t)};try{n.call(void 0,function(t){r.call(o,t)},function(t){i.call(o,t)})}catch(c){i.call(o,c)}}var s,h,l,p=Object.prototype.toString,y="undefined"!=typeof setImmediate?function(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),s=function(t,n,e,o){return Object.defineProperty(t,n,{value:e,writable:!0,configurable:o!==!1})}}catch(d){s=function(t,n,e){return t[n]=e,t}}l=function(){function t(t,n){this.fn=t,this.self=n,this.next=void 0}var n,e,o;return{add:function(r,i){o=new t(r,i),e?e.next=o:n=o,e=o,o=void 0},drain:function(){var t=n;for(n=e=h=void 0;t;)t.fn.call(t.self),t=t.next}}}();var g=s({},"constructor",a,!1);return a.prototype=g,s(g,"__NPO__",0,!1),s(a,"resolve",function(t){var n=this;return t&&"object"==typeof t&&1===t.__NPO__?t:new n(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");n(t)})}),s(a,"reject",function(t){return new this(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");e(t)})}),s(a,"all",function(t){var n=this;return"[object Array]"!=p.call(t)?n.reject(TypeError("Not an array")):0===t.length?n.resolve([]):new n(function(e,o){if("function"!=typeof e||"function"!=typeof o)throw TypeError("Not a function");var r=t.length,i=Array(r),f=0;c(n,t,function(t,n){i[t]=n,++f===r&&e(i)},o)})}),s(a,"race",function(t){var n=this;return"[object Array]"!=p.call(t)?n.reject(TypeError("Not an array")):new n(function(e,o){if("function"!=typeof e||"function"!=typeof o)throw TypeError("Not a function");c(n,t,function(t,n){e(n)},o)})}),a});
;/*!
 * artTemplate - Template Engine
 * https://github.com/aui/artTemplate
 * Released under the MIT, BSD, and GPL Licenses
 */!function(){function S(e){return e.replace(m,"").replace(g,",").replace(y,"").replace(b,"").replace(w,"").split(E)}function x(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function T(e,t){function C(e){return a+=e.split(/\n/).length-1,o&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=p[1]+x(e)+p[2]+"\n"),e}function k(e){var r=a;s?e=s(e,t):n&&(e=e.replace(/\n/g,function(){return a++,"$line="+a+";"}));if(e.indexOf("=")===0){var i=u&&!/^=[=#]/.test(e);e=e.replace(/^=[=#]?|[\s;]*$/g,"");if(i){var o=e.replace(/\s*\([^\)]+\)/,"");!l[o]&&!/^(include|print)$/.test(o)&&(e="$escape("+e+")")}else e="$string("+e+")";e=p[1]+e+p[2]}return n&&(e="$line="+r+";"+e),d(S(e),function(e){if(!e||f[e])return;var t;e==="print"?t=m:e==="include"?t=g:l[e]?t="$utils."+e:c[e]?t="$helpers."+e:t="$data."+e,y+=e+"="+t+",",f[e]=!0}),e+"\n"}var n=t.debug,r=t.openTag,i=t.closeTag,s=t.parser,o=t.compress,u=t.escape,a=1,f={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},h="".trim,p=h?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],v=h?"$out+=text;return $out;":"$out.push(text);",m="function(){var text=''.concat.apply('',arguments);"+v+"}",g="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+v+"}",y="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(n?"$line=0,":""),b=p[0],w="return new String("+p[3]+");";d(e.split(r),function(e){e=e.split(i);var t=e[0],n=e[1];e.length===1?b+=C(t):(b+=k(t),n&&(b+=C(n)))});var E=y+b+w;n&&(E="try{"+E+"}catch(e){"+"throw {"+"filename:$filename,"+"name:'Render Error',"+"message:e.message,"+"line:$line,"+"source:"+x(e)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')"+"};"+"}");try{var T=new Function("$data","$filename",E);return T.prototype=l,T}catch(N){throw N.temp="function anonymous($data,$filename) {"+E+"}",N}}var e=function(e,t){return typeof t=="string"?p(t,{filename:e}):r(e,t)};e.version="3.0.0",e.config=function(e,n){t[e]=n};var t=e.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},n=e.cache={};e.render=function(e,t){return p(e,t)};var r=e.renderFile=function(t,n){var r=e.get(t)||h({filename:t,name:"Render Error",message:"Template not found"});return n?r(n):r};e.get=function(e){var t;if(n[e])t=n[e];else if(typeof document=="object"){var r=document.getElementById(e);if(r){var i=(r.value||r.innerHTML).replace(/^\s*|\s*$/g,"");t=p(i,{filename:e})}}return t};var i=function(e,t){return typeof e!="string"&&(t=typeof e,t==="number"?e+="":t==="function"?e=i(e.call(e)):e=""),e},s={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},o=function(e){return s[e]},u=function(e){return i(e).replace(/&(?![\w#]+;)|[<>"']/g,o)},a=Array.isArray||function(e){return{}.toString.call(e)==="[object Array]"},f=function(e,t){var n,r;if(a(e))for(n=0,r=e.length;n<r;n++)t.call(e,e[n],n,e);else for(n in e)t.call(e,e[n],n)},l=e.utils={$helpers:{},$include:r,$string:i,$escape:u,$each:f};e.helper=function(e,t){c[e]=t};var c=e.helpers=l.$helpers;e.onerror=function(e){var t="Template Error\n\n";for(var n in e)t+="<"+n+">\n"+e[n]+"\n\n"};var h=function(t){return e.onerror(t),function(){return"{Template Error}"}},p=e.compile=function(e,r){function a(t){try{return new o(t,s)+""}catch(n){return r.debug?h(n)():(r.debug=!0,p(e,r)(t))}}r=r||{};for(var i in t)r[i]===undefined&&(r[i]=t[i]);var s=r.filename;try{var o=T(e,r)}catch(u){return u.filename=s||"anonymous",u.name="Syntax Error",h(u)}return a.prototype=o.prototype,a.toString=function(){return o.toString()},s&&r.cache&&(n[s]=a),a},d=l.$each,v="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",m=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,g=/[^\w$]+/g,y=new RegExp(["\\b"+v.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),b=/^\d[^,]*|,\d[^,]*/g,w=/^,+|,+$/g,E=/^$|,+/;t.openTag="{{",t.closeTag="}}";var N=function(e,t){var n=t.split(":"),r=n.shift(),i=n.join(":")||"";return i&&(i=", "+i),"$helpers."+r+"("+e+i+")"};t.parser=function(t,n){t=t.replace(/^\s/,"");var r=t.split(" "),i=r.shift(),s=r.join(" ");switch(i){case"if":t="if("+s+"){";break;case"else":r.shift()==="if"?r=" if("+r.join(" ")+")":r="",t="}else"+r+"{";break;case"/if":t="}";break;case"each":var o=r[0]||"$data",u=r[1]||"as",a=r[2]||"$value",f=r[3]||"$index",l=a+","+f;u!=="as"&&(o="[]"),t="$each("+o+",function("+l+"){";break;case"/each":t="});";break;case"echo":t="print("+s+");";break;case"print":case"include":t=i+"("+r.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(s)){var c=!0;t.indexOf("#")===0&&(t=t.substr(1),c=!1);var h=0,p=t.split("|"),d=p.length,v=p[h++];for(;h<d;h++)v=N(v,p[h]);t=(c?"=":"=#")+v}else e.helpers[i]?t="=#"+i+"("+r.join(",")+");":t="="+t}return t},typeof define=="function"?define(function(){return e}):typeof exports!="undefined"?module.exports=e:this.template=e}();(function(e){e.fn.extend({setCur:function(t,n,r){return this.each(function(i,s){var o=e(s);t||(t="cur"),e.type(t)=="boolean"&&(r=t,t="cur"),e.type(n)=="boolean"&&(r=n,n=""),r?o.removeClass(t).siblings(n).addClass(t):o.siblings(n).removeClass(t).end().addClass(t)})},hasChild:function(t){var n=e.type(t)=="string"?t:"";return e(this[0]).children(n).length>0}})})(window.jQuery),template.helper("cutter",function(e,t){var n,r,i,s,o;return e?e.indexOf("qhimg.com")<0&&e.indexOf("qhmsg.com")<0?e:(t&&(s=t.split("-")[0]+"_"+t.split("-")[1]+"_",o=e.match(/^(http:\/\/.+?)(\/.+)*(\/.+)$/),o&&o.length>0&&(n=[o[1],"/","dmfd","/",s,o[3]].join(""))),n?n:e):"//hao9.qhimg.com/t01742f4d8eae91b502.png"}),function(){var e={_getInfo:function(e){switch(e){case"mid":var t="";try{t=external.GetSpecialData(external.twGetSecurityID(window)).split(",")[3]}catch(n){}if(!t&&window.wdextcmd!==undefined)try{t=window.wdextcmd.GetMid()}catch(n){}if(!t&&window.external)try{external.GetSID!==undefined&&(t=external.GetMID(external.GetSID(window)))}catch(n){}return t;case"mvuid":var r=function(e){var t=1,n=0,r;if(e){t=0;for(r=e.length-1;r>=0;r--)n=e.charCodeAt(r),t=(t<<6&268435455)+n+(n<<14),n=t&266338304,t=n!=0?t^n>>21:t}return t},i=new Date-0,s=window.location.href,o=r(s),u=""+i+o+Math.random()+Math.random()+Math.random()+Math.random();return u=u.replace(/\./g,"").substring(0,32),u;default:return""}},_encodeURIJson:function(e){var t=[];for(var n in e){if(e[n]==null)continue;t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))}return t.join("&")},_queryUrl:function(e,t){e=e.replace(/^[^?=]*\?/ig,"").split("#")[0];var n={};return e.replace(/(^|&)([^&=]+)=([^&]*)/g,function(e,t,r,i){try{r=decodeURIComponent(r)}catch(s){}try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}r in n?n[r]instanceof Array?n[r].push(i):n[r]=[n[r],i]:n[r]=/\[\]$/.test(r)?[i]:i}),t?n[t]:n},updateURLParameter:function(e,t,n){var r="",s=e.split("?"),o=s[0],u=s[1],a="",f="";if(u&&u.indexOf(t)!==-1){s=u.split("&");for(i=0;i<s.length;i++)s[i].split("=")[0]!=t&&(r+=a+s[i],a="&");return f=a+""+t+"="+n,o+"?"+r+f}return e},macroFn:function(e,t){var n=new Date,r=e.replace(t,n.getTime());return r},throttle:function(e,t,n){var r=null,i=0;return function(){var s=arguments,o=(new Date).getTime();clearTimeout(r),o-i>=n?(e.apply(t,s),i=o):r=setTimeout(function(){e.apply(t,s),i=o},n-(o-i))}},unescapeHTML:function(e){return e=""+e,e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'")},escapeHTML:function(e){return e=""+e,e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},clipImage:function(e,t){var n,r,i,s,o;return e.indexOf("qhimg.com")<0&&e.indexOf("qhimgs4.com")<0&&e.indexOf("qhimgs.com")<0&&e.indexOf("qhmsg.com")<0?e:(t&&(s=t.split("-")[0]+"_"+t.split("-")[1]+"_",o=e.match(/^((http|https):\/\/.+?)(\/.+)*(\/.+)$/),o&&o.length>0&&(n=[o[1],"/","dmfd","/",s,o[4]].join(""))),n?n:e)},getHash:function(e){var t=1,n=0,r;if(e){t=0;for(r=e.length-1;r>=0;r--)n=e.charCodeAt(r),t=(t<<6&268435455)+n+(n<<14),n=t&266338304,t=n!=0?t^n>>21:t}return t},getCookie:function(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=t.exec(document.cookie),r=null;return n&&(r=n[2]||null),typeof r=="string"?(r=decodeURIComponent(r),r):""},randomNum:function(e,t){switch(arguments.length){case 1:return e;case 2:return Math.floor(Math.random()*(t-e+1)+e,10);default:return 0}},throttle:function(e,t,n){var r=null,i=0;return function(){var s=arguments,o=(new Date).getTime();clearTimeout(r),o-i>=n?(e.apply(t,s),i=o):r=setTimeout(function(){e.apply(t,s),i=o},n-(o-i))}}};e.mid=e._getInfo("mid"),e.mvuid=e._getInfo("mvuid"),window.hao360=e}();(function(e){function t(e,t,n){n=n||function(t,n,r){return e[r]||r in e?t:n},n===!0&&(n=function(e,t){return t});for(var r in t)e[r]=n(e[r],t[r],r),e[r]==="undefined"&&delete e[r];return e}function n(e){var t,r,i,s;e=e||{};for(t=1,r=arguments.length;t<r;t++){s=arguments[t];if(!s)continue;for(i in s)s.hasOwnProperty(i)&&(typeof s[i]=="object"?e[i]=n(e[i],s[i]):e[i]=s[i]);return e}}function r(e){var n={};return t(e,{on:function(e,t){n[e]=n[e]||[],n[e].push(t)},fire:function(t,r){var i,s=n[t]||[],o=s.length;r=r||{},$.extend(r,{target:e,type:t,preventDefault:function(){r.returnValue=!1}});for(i=0;i<o;i++){s[i](r);if(r.returnValue===!1)break}}}),e.trigger=e.fire,e.bind=e.on,e}var i=function(){function e(e){this.parent=e,this.conf=this.parent.conf,this.init()}return e.prototype={constructor:e,init:function(){var e=this;e.remindTime=e.conf.remindTime||3,e.updateTime=e.conf.updateTime||1,e.hasReminded=!1,e.loading=!1,e.$container=e.parent.$container,e.$unread=null,e.upFreshCallback=e.conf.upFreshCallback,e.alert={unread:e.conf.alertUI.unread,refresh:e.conf.alertUI.refresh},r(e),e.bindEvent(),e.trigger("startRemind")},transformTime:function(e){var t=e/60,n="";return e=e?e:1,t>0&&t<=1?n=Math.floor(e)+"\u5206\u949f":t>1&&t<=24?n=Math.floor(t)+"\u5c0f\u65f6":n="24\u5c0f\u65f6",n},getLoadingState:function(){return this.loading},setLoadingState:function(e){this.loading=e},stopRemind:function(){this.trigger("stopRemind")},startRemind:function(){this.trigger("startRemind")},reloadRefresh:function(){this.trigger("stopRefresh"),this.trigger("startRefresh")},bindEvent:function(){var e=this;e.bind("startRemind",function(){e.unreadTimer&&clearInterval(e.timer),e.unreadTimer=setInterval(function(){e.trigger("showUnread")},e.remindTime*60*1e3)}),e.bind("stopRemind",function(){clearInterval(e.unreadTimer),e.unreadTimer=null}),e.bind("showUnread",function(){e.$unread===null&&(e.$unread=$(e.alert.unread),e.$unread.prependTo(e.$container),e.trigger("unreadEvents"),e.$unread.one("click",function(t){$(window).scrollTop(0),setTimeout(function(){e.trigger("removeUnread"),e.trigger("startLoad")},10)}).find(".j-unread-close").one("click",function(t){t.stopPropagation(),e.trigger("removeUnread")}))}),e.bind("unreadEvents",function(){var t=e.$unread,n=t.offset().top,r=$(".js-nav"),i=document.body.offsetWidth,s=!0;$(window).scroll(function(){var e=$(window).scrollTop();s&&(n=t.offset().top),e>n?(s=!1,t.css({position:"fixed",top:"42px",marginTop:"0","z-index":"10",opacity:"0.9"}),r.css("display")!=="none"&&t.css("top","78px")):(s=!0,t.attr("style",""))})}),e.bind("removeUnread",function(){e.$unread&&e.$unread.length&&e.$unread.remove(),e.$unread=null}),e.bind("startLoad",function(){e.loading=!0,e.parent.trigger("load_data",{strategy:"remind"}),e.upFreshCallback()}),e.bind("startRefresh",function(){e.refreshTimer&&clearInterval(e.refreshTimer),e.refreshTimer=setInterval(function(){e.trigger("updateTime")},e.updateTime*60*1e3)}),e.bind("updateTime",function(){var t=e.$container.find(".j-alert-refresh"),n=+t.data("time")||1,r=e.transformTime(n);t.find(".j-refresh-time").text(r),t.data("time",n+1)}),e.bind("stopRefresh",function(t){clearInterval(e.refreshTimer),e.refreshTimer=null}),e.$container.on("click",".j-alert-refresh",function(t){t.stopPropagation(),$(window).scrollTop(0),e.trigger("removeUnread"),e.trigger("startLoad")})}},e}(),s=function(){function e(e){this.parent=e,this.conf={uniqueTag:this.parent.conf.uniqueTag,thresholdVal:this.parent.conf.thresholdVal,thresholdTime:this.parent.conf.thresholdTime},this.init()}return e.prototype={constructor:e,init:function(){var e=this;e.$container=e.parent.$container,e.scrollLoadName="scroll.infoFlow."+e.conf.uniqueTag,e.bindEvent()},offEvent:function(){var e=this;$(window).off(e.scrollLoadName)},bindEvent:function(){var e=this;$(window).on(e.scrollLoadName,e.throttle(function(t){e.loading||e.handleScroll(t)})).trigger(e.scrollLoadName)},setLoadingState:function(e){this.loading=e},handleScroll:function(e){var t=this,n=$(window),r=n.scrollTop(),i=n.height(),s=t.$container.offset().top+t.$container.outerHeight(),o=t.conf.thresholdVal;r+i>s-o&&(t.loading=!0,t.parent.trigger("load_data",{strategy:"scroll"}))},throttle:function(e){var t=this,n,r=t.conf.thresholdTime;return function(){var t=this,i=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(t,i)},r)}}},e}(),o=function(e){function t(e){this.init(e)}return t.prototype={constructor:t,init:function(e){var t=this;t.conf=e,t.container=e.container,t.$context=$(e.context),t.$container=$(e.container),t.alert={loading:e.alertUI.loading,result:e.alertUI.result},t.scroll={page:-1,hasData:!0,api:null,module:t.conf.hasScrollLoad?new s(t):null},t.remind={page:-1,hasData:!0,loading:!1,api:null,module:t.conf.hasRemindLoad?new i(t):null},r(t),t.bindEvent(),t.hasFirstPageData&&t.handleIndex(),t.setAPI()},setAPI:function(){var e=this,t,n;e.conf.hasScrollLoad&&(t=$.extend(!0,{},e.conf.baseLoad,e.conf.scrollLoad),e.scroll.api={},e.scroll.api.baseUrl=e.conf.isQuery?t.queryUrl:t.baseUrl,e.scroll.api.urlParam=(e.conf.isQuery?t.queryParam:t.urlParam)||{},e.scroll.api.urlParam[t.pagingName]=0,e.scroll.api.pagingName=t.pagingName||"page",e.scroll.api.timestamp=t.timestamp,t.countName&&t.countNum&&(e.scroll.api.urlParam[t.countName]=t.countNum)),e.conf.hasRemindLoad&&(n=$.extend(!0,{},e.conf.baseLoad,e.conf.remindLoad),e.remind.api={},e.remind.api.baseUrl=e.conf.isQuery?n.queryUrl:n.baseUrl,e.remind.api.urlParam=(e.conf.isQuery?n.queryParam:n.urlParam)||{},e.remind.api.urlParam[n.pagingName]=0,e.remind.api.pagingName=n.pagingName||"page",e.remind.api.timestamp=n.timestamp,n.countName&&n.countNum&&(e.remind.api.urlParam[n.countName]=n.countNum))},handleIndex:function(){var e=this;e.handleData({strategy:"remind",resData:e.conf.firstPageData}),e.remind.page++},beforeFetchData:function(e){var t=this;e=="scroll"?(t.scroll.module.setLoadingState(!0),t.scroll.$loading=$(t.alert.loading),t.$container.append(t.scroll.$loading),t.scroll.api.urlParam[t.scroll.api.pagingName]=++t.scroll.page,t.scroll.api.timestamp&&(t.scroll.api.urlParam[t.scroll.api.timestamp]=+(new Date)),t.fetchData(t.scroll.api,"scroll")):e=="remind"&&(t.remind.module.setLoadingState(!0),t.remind.$loading=$(t.alert.loading),t.$container.find(".j-alert-loading").remove(),t.$container.prepend(t.remind.$loading),t.remind.api.urlParam[t.remind.api.pagingName]=++t.remind.page,t.remind.api.timestamp&&(t.remind.api.urlParam[t.remind.api.timestamp]=+(new Date)),t.fetchData(t.remind.api,"remind"))},fetchData:function(e,t){var n=this,r=+(new Date);$.ajax({type:"get",url:e.baseUrl,data:e.urlParam,dataType:"jsonp"}).done(function(e,r){var i={resData:e,jqAjax:r,strategy:t,hasDislike:n.conf.hasDislike?!0:!1};window.localStorag&&localstorage.setItem("obj",JSON.stringify(i)),window.sessionStorage,n.afterFetchData(i)}).fail(function(e,r){var i={resData:e,jqAjax:r,strategy:t,hasData:!1};n.afterFetchData(i)}).always(function(t,n,i){var s=+(new Date)-r,o={url:e.baseUrl,dtime:s};n!=="success"?o.error=1:t.errno!=0&&(o.error=2),monitor.log(o,"api")})},afterFetchData:function(e){var t=this;e.strategy=="scroll"?(t.scroll.module.setLoadingState(!1),t.scroll.$loading.remove()):(t.remind.module.setLoadingState(!1),t.remind.$loading.remove(),t.trigger("removeRefresh")),t.handleData(e)},handleData:function(e){var t=this;t.trigger("preHandleData",e),e.hasData?t.handleHasData(e):t.handleNoData(e)},handleHasData:function(e){var t=this;t.trigger("transformData",e),t.trigger("afterTransformData",e),t.trigger("insert",e),t.trigger("removeStickTop"),t.remind.module.trigger("startRefresh"),t.trigger("afterInsert",e),t.afterHandleData(e)},handleNoData:function(e){var t=this;e.strategy=="scroll"?t.scroll.hasData=!1:t.remind.hasData=!1,t.trigger("handleNoData",e),t.afterHandleData(e)},afterHandleData:function(e){var t=this,n=$(t.alert.result),r=e.hasData?"\u4e3a\u60a8\u63a8\u8350\u4e86"+e.data.length+"\u7bc7\u65b0\u95fb":"\u5c0f\u7f16\u6b63\u5728\u52aa\u529b\u8d76\u7a3f\u4e2d...";e.strategy=="scroll"?e.hasData||(n.find(".j-alert-text").text(r),n.prependTo(t.$container).delay(3e3).slideUp(function(){$(this).remove()})):(n.find(".j-alert-text").text(r),n.prependTo(t.$container).delay(3e3).slideUp(function(){$(this).remove()}))},handleScroll:function(){var e=this;e.scroll.hasData?e.beforeFetchData("scroll"):!scroll.hasData},handleRemind:function(){var e=this;e.remind.hasData?e.beforeFetchData("remind"):e.lockRemind()},bindEvent:function(){var e=this,t=e.conf;e.bind("load_data",function(t){t.strategy=="scroll"?e.handleScroll():t.strategy=="remind"&&e.handleRemind()}),e.bind("afterTransformData",function(t){e.conf.hasRemindLoad&&t.strategy=="remind"&&(t.handledData+=e.remind.module.alert.refresh)}),e.bind("insert",function(t){t.strategy=="remind"?e.$container.prepend(t.handledData):e.$container.append(t.handledData)}),e.bind("removeRefresh",function(){var t=e.$container.find(".j-alert-refresh");t.length&&(t.remove(),e.remind.module.reloadRefresh())}),e.bind("removeStickTop",function(){e.$container.find("[data-stick=1]").remove()}),t.beforeFetchData&&e.bind("beforeFetchData",t.beforeFetchData),t.preHandleData&&e.bind("preHandleData",t.preHandleData),t.transformData&&e.bind("transformData",t.transformData),t.afterHandleData&&e.bind("beforeInsert",t.afterHandleData),t.insert&&e.bind("insert",t.insert),t.afterInsert&&e.bind("insert",t.afterInsert),t.handleNoData&&e.bind("handleNoData",t.handleNoData)},lockScroll:function(){this.scroll.module.offEvent()},activeScroll:function(){this.scroll.module.bindEvent()},lockRemind:function(){this.remind.module.stopRemind()},activeRemind:function(){this.remind.module.startRemind()}},t};e.BTIME_INFOFLOW={init:function(e){var t=$.extend({},e),n=o(t),r=new n(t);return r},bindEvent:function(){}}})(window);window.BTIME_MONITOR=function($,window){function share(e){var t={"\u5fae\u4fe1\u626b\u7801\u5206\u4eab":"6","\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a":"0","\u5206\u4eab\u5230\uff31\uff31\u7a7a\u95f4":"2","\u5206\u4eab\u5230\u8c46\u74e3\u7f51":"3","\u5206\u4eab\u5230\u4eba\u4eba\u7f51":"4"},n=e.attr("title")||e[0].innerText,r={share_type:t[n]||"",action:"share"},i={};return r}function comment(e,t){var n={};if(e=="qh-latest-list-wrap"){var r=common.getParentNode(t[0],"DIV");if(!$(r).attr("data-cmt-id"))return;return n={target_comment_id:$(r).attr("data-cmt-id"),action:"comment"},n}if(e=="QIHOO360COMMENTMX"){var i=common.getParentNode(t[0],"SPAN");if(!i)return;var s=t.parents(".qh-cmt").find(".qh-cmt-reply");if(!s.length)return;var o=s.attr("data-reply-pid");return n={target_comment_id:o,action:"comment"},n}if(e=="comment-qh"){var u=common.getParentNode(t[0],"A");if(!u)return;if($("#"+e).find("textarea").val()!="")return n={action:"comment"},n}}function belowthefold(e,t){var n,r=$(window);return n=(window.innerHeight?window.innerHeight:r.height())+r.scrollTop(),n<=$(e).offset().top-t.threshold}function rightoffold(e,t){var n,r=$(window);return n=r.width()+r.scrollLeft(),n<=$(e).offset().left-t.threshold}function abovethetop(e,t){var n,r=$(window);return n=r.scrollTop(),n>=$(e).offset().top+t.threshold+$(e).height()}function leftofbegin(e,t){var n,r=$(window);return n=r.scrollLeft(),n>=$(e).offset().left+t.threshold+$(e).width()}function inviewport(e,t){return!rightoffold(e,t)&&!leftofbegin(e,t)&&!belowthefold(e,t)&&!abovethetop(e,t)}function cal(){var e=[],t=[];return $("[data-log]").each(function(n,r){var i=$(r);is_read=i.attr("data-read");if(!is_read&&inviewport(r,{threshold:0})){var s=i.attr("data-log")||"",o={};try{if(i.attr("data-mid")!=undefined||i.parents(".cell").length)i[0].tagName=="A"&&t.push(AdViewTrackPar("\u767e\u5ea6\u8d34\u7247",i.attr("href")));else{o=JSON.parse(s),o.action="view",o.ts=+(new Date);var s=JSON.stringify(o);e.push(s)}}catch(u){}i.attr("data-read",1)}}),t.length&&log.buildLog(t),e}function CalNewsReadPercentage(){var e=$(".content-text"),t=$(window).scrollTop(),n=e.offset().top,r=e.height(),i=0,s=$(window).height(),o=n+r;return o<t+s?i=1:n<=t?i=(t-n+s)/r:n>t&&n<t+s?i=(t+s-n)/r:i=0,i}function View(){var e=cal();e.length&&log.buildLog(e);var t=AdViewCal();t.length&&log.buildLog(t)}function AdViewCal(){var e=[];return $("[ad_track]").each(function(t,n){var r=$(n),i=r.attr("data-read");if(!i&&inviewport(n,{threshold:0})){var s=r.attr("bk")||r.parents("[bk]").length&&r.parents("[bk]").attr("bk")||"",o=n.tagName=="A"?r.attr("href"):r.find("a").length&&r.find("a").attr("href")||"",u=AdViewTrackPar(s,o);e.push(u),r.attr("data-read",1)}}),e}function AdViewTrackPar(e,t){var n;defaultConf.isChannel?n=GetLogBase().uid:n=JSON.parse(BTIME_MONITOR.basePar).uid;var r={action:"ad_view",ts:+(new Date),pid:defaultConf.pid,cid:"bk:"+e,link_type:9,type:defaultConf.isChannel?defaultConf.pid:defaultConf.twoChannel,id:n};r.link_list=t&&[t]||[];var i=JSON.stringify(r);return i}function AdClickTrack(e,t){var n;defaultConf.isChannel?n=GetLogBase().uid:n=JSON.parse(BTIME_MONITOR.basePar).uid;var r={pid:defaultConf.pid,cid:e,link_type:9,type:defaultConf.isChannel?defaultConf.pid:defaultConf.twoChannel,action:"ad_click",ts:+(new Date),id:n};r.link_list=[t],log.buildLog([JSON.stringify(r)])}function bandclick(){$(document).on("mousedown",function(e){e=EventH.fix(e);var t=common.getContainId(e.target),n=$(e.target),r={},i=$(e.target).parents("[data-log]"),i=i.length&&i||n.attr("data-log")&&n||"";clickPar=i&&i.attr("data-log")||"",json={};if(clickPar){try{json=JSON.parse(clickPar)}catch(e){return}if(i.attr("data-mid")!=undefined||i.parents(".cell").length){if(i[0].tagName=="A"){var s=i.attr("href");AdClickTrack("bk:\u767e\u5ea6\u8d34\u7247\u5e7f\u544a",s)}}else json.action="click",json.ts=+(new Date),clickPar=JSON.stringify(json),log.buildLog([clickPar])}else{var o=BTIME_MONITOR.basePar;switch(t){case"bk:share":json=share(n);if(json)try{json=$.extend(!0,JSON.parse(o),json),log.buildLog([JSON.stringify(json)])}catch(e){}break;case"qh-latest-list-wrap":case"QIHOO360COMMENTMX":case"comment-qh":json=comment(t,n);if(json)try{json=$.extend(!0,JSON.parse(o),json),log.buildLog([JSON.stringify(json)])}catch(e){}break;case"suggest-common":case"search-form":var u="";if(t=="search-form")u=$("#"+t).find("#haosou-input").val();else{var a=$(common.getParentNode(n[0],"A"));u=a.attr("data-text")}if(u)try{json={keyword:u,action:"search"},base={};if(o){var f=JSON.parse(o);base={mid:f.mid,guid:f.guid,uid:f.uid,client_id:f.client_id,net:f.net}}else base=GetLogBase();json=$.extend(!0,json,base),log.buildLog([JSON.stringify(json)])}catch(e){}break;default:var a=$(common.getParentNode(n[0],"A"));if(a.length)if(a.attr("ad_track")||a.parents("[ad_track]").length){var s=a.attr("href");AdClickTrack(t,s)}}}})}function VideoMonitor(basePar){var vvMonitor=function(){return{contain:{},post:function(e){var t=+(new Date),n=basePar;try{n=JSON.parse(n),n.action="video_seq",n.stream_vbt="\u9ad8\u6e05",n.ts=t,n=$.extend(!0,n,e)}catch(r){return}var i=JSON.stringify(n);log.buildLog([i])},vStart:function(){var e=this;e.post({type:"start",pt:0})},vPlaying:function(e){var t=this;t.post({type:"playing",pt:e})},vPlay:function(e){var t=this;t.post({type:"play",pt:e})},vPause:function(e){var t=this;t.post({type:"pause",pt:e})},vStop:function(e){var t=this;t.post({type:"stop",pt:e})}}}();window.onPlayerEvent=function(event,params){var jsonC=eval("("+params+")"),num=Math.floor(jsonC.videoCurrentTime);if(jsonC.type=="replay")switch(event){case"videoupdate":jsonC.videoTotalTime&&event=="videoupdate"&&num%5==0&&(vvMonitor.contain[jsonC.videoId]!=undefined&&vvMonitor.contain[jsonC.videoId]!=num||vvMonitor.contain[jsonC.videoId]==undefined)&&(num!=0?vvMonitor.vPlaying(num):vvMonitor.vStart(),vvMonitor.contain[jsonC.videoId]=num);break;case"videostop":vvMonitor.vStop(num),App&&App.playnext&&App.playnext();break;case"videopause":vvMonitor.vPause(num);break;case"videoplay":vvMonitor.vPlay(num)}}}function ExtendJson(){window.JSON||(window.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var e=Object.prototype.toString,t=Array.isArray||function(t){return e.call(t)==="[object Array]"},n={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},r=function(e){return n[e]||"\\u"+(e.charCodeAt(0)+65536).toString(16).substr(1)},i=/[\\"\u0000-\u001F\u2028\u2029]/g;return function s(n){if(n==null)return"null";if(typeof n=="number")return isFinite(n)?n.toString():"null";if(typeof n=="boolean")return n.toString();if(typeof n=="object"){if(typeof n.toJSON=="function")return s(n.toJSON());if(t(n)){var o="[";for(var u=0;u<n.length;u++)o+=(u?", ":"")+s(n[u]);return o+"]"}if(e.call(n)==="[object Object]"){var a=[];for(var f in n)n.hasOwnProperty(f)&&a.push(s(f)+": "+s(n[f]));return"{"+a.join(", ")+"}"}}return'"'+n.toString().replace(i,r)+'"'}}()})}function GetLogBase(){var e=$($("[data-log]")[0]).attr("data-log"),t={};try{e||(e=$($("[data-read]")[0]).attr("data-log"));var n=JSON.parse(e);t={mid:n.mid,guid:n.guid,uid:n.uid,client_id:n.client_id,net:n.net}}catch(r){}return t}function LeaveTime(e){var t=+(new Date),n=window.G_start_time.getTime();leaveTime=Math.floor((t-n)/1e3);var r={action:"duration",ts:t,duration:leaveTime};r=$.extend(!0,r,e,GetLogBase()),log.buildLog([JSON.stringify(r)])}var EventH={fix:function(e){if(!("target"in e)){var t=e.srcElement||e.target;t&&t.nodeType==3&&(t=t.parentNode),e.target=t}return e}},ObjectH={getType:function(t){return t!=null&&t.constructor!=null?Object.prototype.toString.call(t).slice(8,-1):""}},common={isUrl:function(t){var n=/((http|ftp|https|file):\/\/([\w\-]+\.)+[\w\-]+(\/[\w\u4e00-\u9fa5\-\.\/?\@\%\!\&=\+\~\:\#\;\,]*)?)/ig;return t.match(n)?!0:!1},getType:function(t){return t!=null&&t.constructor!=null?Object.prototype.toString.call(t).slice(8,-1):""},getContainId:function(e){var t=null;while(e){if(e.attributes&&("bk"in e.attributes||"data-bk"in e.attributes)){t=e.getAttribute("bk")||e.getAttribute("data-bk");if(t)return t="bk:"+t,t.substr(0,100)}if(e.id)return t=e.getAttribute("data-desc")||e.id,t.substr(0,100);e=e.parentNode}return null},getHref:function(e){try{return e.getAttribute("data-href")||e.href||""}catch(t){return""}},getParentNode:function(e,t,n){n=n||5;while(n>0){var r=t.toUpperCase();try{if(r===e.tagName)return e}catch(i){return null}e=e.parentNode,n--}return null},getClickParm:function(e){e=EventH.fix(e);var t=e.target,n=t.tagName,r=this.getContainId(t);if(!t.type||t.type!="submit"&&t.type!="button"){t=this.getParentNode(t,"A");if(t){var o=this.getHref(t);if(common.isUrl(o)){var u=r.indexOf("bk:")>=0?r.substr(3):"";return{cid:r,type:"click",link_list:[{link:this.getHref(t)}],link_type:linkTypeObj[u]||($(this).parents(".N-w380").length?7:8)}}}}else{var i=this.getParentNode(t,"FORM"),s={};if(i&&$(i).parent(".search-form").length>0)return{cid:r,keyword:$("#kw").val(),type:"search"}}return!1}},log={buildLog:function(e){var t="https://click.btime.com/api/weblog",n={content:e};$.ajax({url:t,data:n,dataType:"json",type:"post"}).done(function(e){}).fail(function(e){})}},defaultConf={isChannel:!0,pid:""};return{readPercentage:0,basePar:"",init:function(e){ExtendJson(),setInterval("BTIME_MONITOR.track()",1e3);var t=this;defaultConf=$.extend(!0,defaultConf,e||{}),defaultConf.isChannel?(window.App&&window.App.router&&window.App.router.channel&&(setInterval("BTIME_MONITOR.LeaveTimeTrack()",5e3),$(window).on("beforeunload",function(){t.LeaveTimeTrack()})),$(document.body).on("clickPar",function(e,t){var n=t&&t.s_log&&JSON.stringify(t.s_log)||"";n&&VideoMonitor(n)}),$(document.body).on("tabSecondChannelTrack",function(){t.LeaveTimeTrack()})):(t.basePar=e.baseLog,VideoMonitor(t.basePar),$(document.body).on("bubble_click",function(){var e=$(".heart-btn").attr("data-emoji-type")||1,n=JSON.parse(t.basePar);n.action="bubble_click",n.bubble_type=e,n.ts=+(new Date),log.buildLog([JSON.stringify(n)])})),bandclick(),$(".content-text").length&&(window.ReadPercentageInter=setInterval("BTIME_MONITOR.CalNewsReadPercentage()",2e3))},track:View,CalNewsReadPercentage:function(){var e=(new Number(CalNewsReadPercentage())).toFixed(2),t=this;if(e>t.readPercentage){t.readPercentage=e;var n=+(new Date),r=t.basePar;try{r=JSON.parse(r)}catch(i){return}r=$.extend(!0,r,{action:"detail",percent:e,ts:n}),log.buildLog([JSON.stringify(r)])}(e==1||(n-window.G_start_time.getTime())/1e3>300)&&window.clearInterval(ReadPercentageInter)},LeaveTimeTrack:function(){var e=window.App.router.channel_cid;LeaveTime({channel_id:e})}}}(jQuery,window);(function(e){e(function(){var t={node:e("body"),sliderNode:null,sliderclktk:null,bannerNode:null,bannerclktk:null,init:function(t){var n=this;n.conf=t,Promise.all([this.sliderAjax(),this.bannerAjax()]).then(function(t){var r=t[0],i=t[1],s=function(){return{sliderRender:function(){var t=r.adspaces[n.conf.slider.data.showids].ads[0];n.sliderclktk=t.clktk;var i=t.imptk;for(var s=0;s<i.length;s++)n.monitorTrack(i[s]);var o=r.impurl?r.impurl:"",u=o+t.imparg;n.monitorTrack(u);var a=n.stringToFragment(n.compile(e("#topAds").html().trim(),t));n.node.prepend(a),n.sliderNode=e("#topSliderAd"),n.sliderShow()},bannerRender:function(){var t=i.ads[0];n.bannerclktk=t.clktk;var r=t.imptk;for(var s=0;s<r.length;s++)n.monitorTrack(r[s]);var o=i.impurl?i.impurl:"",u=o+t.imparg;n.monitorTrack(u);var a=n.stringToFragment(n.compile(e("#topBannerAds").html().trim(),t));n.node.prepend(a),n.bannerNode=e("#topBannerAd"),n.bannerShow()}}}(),o=function(e){return Object.prototype.toString.call(e.adspaces)==="[object Object]"?!0:!1};if(!o(r))return!1;o(r)&&s.sliderRender()})},sliderAjax:function(){var t=this;return cookie.get("_toutiao_indexTopAdSliderClear")>=0?new Promise(function(e){var t={};e(t)}):new Promise(function(n){e.ajax({url:t.conf.slider.url,type:"get",data:t.conf.slider.data,dataType:"jsonp",jsonp:"jsonp",jsonpCallback:"__jsonp"+Math.random().toString().replace(".","")+"__",success:function(e){n(e)}})})},sliderShow:function(){var t=this;if(!t.sliderNode)return;var n=t.sliderNode.find(".top-ad-img1"),r=t.sliderNode.find(".top-ad-img2"),i=t.sliderNode.find(".top-ad-main a"),s=t.sliderNode.find(".top-ad-btn"),o=t.sliderNode.find(".top-ad-btn-clear"),u,a=function(){return{slideShort:function(e){e&&e==="show"?n.show():(r.slideUp(),n.slideDown()),s.removeClass("top-ad-btn-close").addClass("top-ad-btn-open")},slideLong:function(e){n.slideUp(),r.slideDown(),s.removeClass("top-ad-btn-open").addClass("top-ad-btn-close"),typeof e=="function"&&e()}}}();if(cookie.get("_toutiao_indexTopSliderAd")>=0)a.slideShort("show");else{var f=t.cookieExpires();cookie.set("_toutiao_indexTopSliderAd",1,{domain:"hao.360.cn",path:"/",expires:f}),a.slideLong(function(){u=setTimeout(function(){s.click()},4e3)})}s.unbind("click").bind("click",function(){e(this).hasClass("top-ad-btn-open")?a.slideLong():(u&&clearTimeout(u),a.slideShort())}),o.bind("click",function(){e(this).parent().remove();var n=t.cookieExpires();cookie.set("_toutiao_indexTopAdSliderClear",1,{domain:"hao.360.cn",path:"/",expires:n})}),i.bind("click",function(){for(var e=0;e<t.sliderclktk.length;e++)t.monitorTrack(t.sliderclktk[e])})},bannerAjax:function(){return cookie.get("_toutiao_indexTopAdBannerClear")>=0?new Promise(function(e){var t={};e(t)}):new Promise(function(t){var n={type:1,of:4,newf:1,showids:"OW7ABv",scheme:"https"},r="https://show-g.mediav.com/s";e.ajax({url:r,type:"get",data:n,dataType:"jsonp",jsonp:"jsonp",jsonpCallback:"__jsonp"+Math.random().toString().replace(".","")+"__",success:function(e){t(e)}})})},bannerShow:function(){var t=this,n=t.bannerNode.find(".top-ad-img1"),r=t.bannerNode.find(".top-ad-main a"),i=t.bannerNode.find(".top-ad-btn-clear");i.bind("click",function(){e(this).parent().remove();var n=t.cookieExpires();cookie.set("_toutiao_indexTopAdBannerClear",1,{domain:"hao.360.cn",path:"/",expires:n})}),r.bind("click",function(){for(var e=0;e<t.bannerclktk.length;e++)t.monitorTrack(t.bannerclktk[e])})},cookieExpires:function(){var e=new Date,t=e.getTime(),n=(new Date(e.toLocaleDateString())).getTime()-1,r=t-n,i=864e5-r,s=new Date;return s.setTime(i+t),s},stringToFragment:function(e){var t=document.createDocumentFragment(),n=document.createElement("div");return n.innerHTML=e,t.appendChild(n.firstChild),t},compile:function(e,t,n){var r=/\{\{([^\{\}]*)\}\}/g,e=e.replace(r,function(e,r){if(!r||!t[r])return"";try{var i=t[r];return typeof i!="undefined"?n?n(i):i:""}catch(s){return e}});return e},monitorTrack:function(e){var t=new Date,n="&ts="+t.getTime(),r=/(&turl=)/g;r.test(e)&&(e=e.replace(r,n)+"&turl="),monitor.sendLog(e)}},n={slider:{data:{type:1,of:4,newf:2,showids:"f0IMHK",scheme:"https"},url:"https://show-g.mediav.com/s"}};t.init(n)})})(jQuery);(function(){window.SoAd=function(e){this.$options=e,this.__init()};var e=window.SoAd.prototype;e.__init=function(){var e=this;e.$asin="",e.$lines=[],e.__requestAd()},e.__requestAd=function(){var e=this;return new Promise(function(t){jsonp({url:e.$options.url,data:e.$options.params,cbName:e.$options.cbName||"_callback",success:function(n){e.__requestSuccess(n),t(n),e.$options.success&&e.$options.success(e.$lines),e.__initLog()}})})},e.__requestSuccess=function(e){if(e.errno!==0)return console.error("\u8054\u76df\u5e7f\u544a\u8bf7\u6c42\u6210\u529f\uff0c\u4f46\u6570\u636eerror\u975e0");var t=this;t.$asin=e.asin;var n=e.guess;for(var r=0,i=n.length;r<i;r++){var s=n[r].sites,o=[];t.$lines.push(o);for(var u=0,a=s.length;u<a;u++){var f=t.$options.template.tmpl(s[u]);o.push(f)}}},e.__initLog=function(){var e=this;e.__initIntersectionObserver(),e.__initClickLog()},e.__initIntersectionObserver=function(){var e=this,t=e.__showLog();IntersectionObserver?e.__scrollObserver(t):e.__intersectionObserver(t)},e.__intersectionObserver=function(e){var t=this,n=$(t.$options.intersectionObserver).get(0),r=new IntersectionObserver(function(t){t[0].isIntersecting&&e()});r.observe(n)},e.__scrollObserver=function(e){var t=this,n=$(t.$options.intersectionObserver),r=t._debounce(function(){var t=n.offset().top,r=t+n.height(),i=$(window).scrollTop(),s=document.documentElement.clientHeight,o=i+s;t>=i&&r<=o&&e()},500);$(window).on("scroll",r),r()},e.__initClickLog=function(){var e=this;$(e.$options.intersectionObserver).on("click","a",function(){var t=$(this).attr(e.$options.clickAttrName);e.__send(t)})},e.__showLog=function(){var e=this,t=!0;return function(){t&&(e.__send(e.$asin),t=!1)}},e._debounce=function(e,t){var n=null;return function(){clearTimeout(n),n=setTimeout(function(){e.apply(null,arguments)},t||0)}},e.__send=function(e){if(!e)return;var t="log_"+ +(new Date),n=window[t]=new Image;n.onload=n.onerror=function(){window[t]=null},e=e+"&__monitor_t="+Math.random()+(new Date).getTime(),n.src=e}})();